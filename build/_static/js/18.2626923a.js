(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{420:function(e,n){function t(e){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}t.keys=function(){return[]},t.resolve=t,e.exports=t,t.id=420},429:function(e,n,t){"use strict";t.d(n,"a",(function(){return d}));t(51),t(52),t(53),t(122),t(306),t(40),t(417),t(54),t(55),t(41),t(123),t(56),t(307),t(57);var i=t(0),o=t.n(i);function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(e,n){return(l=Object.setPrototypeOf||function(e,n){return e.__proto__=n,e})(e,n)}function c(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}var m=t(419);window.Cesium=m,t(421);var d=function(e){function n(){var e,t,i,o;!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,n);for(var a=arguments.length,l=new Array(a),m=0;m<a;m++)l[m]=arguments[m];return i=this,t=!(o=(e=s(n)).call.apply(e,[this].concat(l)))||"object"!==r(o)&&"function"!=typeof o?u(i):o,c(u(t),"_viewer",void 0),c(u(t),"state",{beActived:!1}),t}var t,i,m;return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),n&&l(e,n)}(n,e),t=n,m=[{key:"ins",get:function(){var e=this;return null!=this._ins?Promise.resolve(this._ins):new Promise((function(n,t){e.listener.push((function(e){n(e)}))}))}},{key:"__ins",set:function(e){n.listener.length>0&&(n.listener.forEach((function(n){return n(e)})),n.listener=[]),this._ins=e}}],(i=[{key:"componentDidMount",value:function(){0!=this.props.setUp&&this.setUp(),n.__ins=this}},{key:"setUp",value:function(){console.warn("ceisum 启动！！"),this.setState({beActived:!0}),Cesium.Ion.defaultAccessToken="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiJiMzJmNDgwZi1iNmQ2LTQ0NWEtOWRkNi0wODkxYzYxYTg0ZDIiLCJpZCI6ODUzMiwic2NvcGVzIjpbImFzciIsImdjIl0sImlhdCI6MTU1MjIwMjY4OH0.u4d7x0IxZY06ThT4JFmxrfgBxVjQcfI6xXDLu-fsWsY";var e,n=new Cesium.Viewer(this.containerId,f.MAPOPTIONS);return n.cesiumWidget.creditContainer.style.display="none",n.cesiumWidget.screenSpaceEventHandler.removeInputAction(Cesium.ScreenSpaceEventType.LEFT_DOUBLE_CLICK),n.scene.globe.enableLighting=f.global.enableLighting,n.scene.globe.depthTestAgainstTerrain=f.global.depthTestAgainstTerrain,n.scene.highDynamicRange=!0,n.frameUpdate=new Cesium.Event,n.scene.preUpdate.addEventListener((function(t){var i=Date.now(),o=null!=e?i-e:0;e=i,n.frameUpdate.raiseEvent(o)})),null!=this.props.onViewerLoaded&&this.props.onViewerLoaded(n),this._viewer=n,n}},{key:"destroy",value:function(){this.state.beActived&&(this.setState({beActived:!1}),this._viewer&&(console.warn("ceisum destroy！！"),this._viewer.destroy(),this._viewer=null))}},{key:"componentWillUnmount",value:function(){this.destroy()}},{key:"render",value:function(){var e={width:"100%",height:"100%",top:0,left:0,bottom:0,right:0,position:"absolute",display:this.state.beActived?"inline":"none"};return o.a.createElement("div",{id:this.containerId,style:e})}},{key:"containerId",get:function(){return this.props.id||"__cesiumContainer"}},{key:"viewer",get:function(){return this.state.beActived?this._viewer:this.setUp()}}])&&a(t.prototype,i),m&&a(t,m),n}(o.a.Component);c(d,"_ins",void 0),c(d,"listener",[]);var f={ION:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiJhMGRlYTM0ZS0zYjQzLTQ0N2EtYTk4ZS0zNmIwMmU3MDRkNTIiLCJpZCI6MTkzMSwiaWF0IjoxNTMwNzU5NTg3fQ.nt8CVoWjIXTeDM9T6qPs-dM7tb7IWnNc56mzAqhcBBY",global:{enableLighting:!1,depthTestAgainstTerrain:!0},MAPOPTIONS:{imageryProviderViewModels:[new Cesium.ProviderViewModel({name:"Google卫星",iconUrl:"http://img3.cache.netease.com/photo/0031/2012-03-22/7T6QCSPH1CA10031.jpg",tooltip:"Google卫星",creationFunction:function(){return new Cesium.UrlTemplateImageryProvider({url:"http://www.google.cn/maps/vt?lyrs=s&x={x}&y={y}&z={z}",tilingScheme:new Cesium.WebMercatorTilingScheme,minimumLevel:1,maximumLevel:200,credit:"Google Earth"})}})],shouldAnimate:!0,geocoder:!1,shadows:!1,terrainProviderViewModels:[],animation:!1,baseLayerPicker:!1,fullscreenButton:!1,vrButton:!1,homeButton:!1,infoBox:!1,sceneModePicker:!1,selectionIndicator:!1,timeline:!1,navigationHelpButton:!1,terrainShadows:Cesium.ShadowMode.DISABLED}}},507:function(e,n,t){"use strict";t.r(n),t.d(n,"default",(function(){return d}));t(51),t(52),t(53),t(122),t(40),t(418),t(54),t(55),t(41),t(56),t(57);var i=t(0),o=t.n(i),r=t(429);function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e,n){return(c=Object.setPrototypeOf||function(e,n){return e.__proto__=n,e})(e,n)}function m(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}var d=function(e){function n(){var e,t,i,o;!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,n);for(var r=arguments.length,s=new Array(r),c=0;c<r;c++)s[c]=arguments[c];return i=this,t=!(o=(e=u(n)).call.apply(e,[this].concat(s)))||"object"!==a(o)&&"function"!=typeof o?l(i):o,m(l(t),"currentId",void 0),m(l(t),"currentPirmitive",void 0),m(l(t),"currentColor",void 0),t}var t,i,d;return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),n&&c(e,n)}(n,e),t=n,(i=[{key:"render",value:function(){return o.a.createElement(r.a,{id:this.constructor.name,onViewerLoaded:this.handleViewerLoaded.bind(this)})}},{key:"handleViewerLoaded",value:function(e){var n=this,t=e.scene.primitives.add(new Cesium.Cesium3DTileset({url:Cesium.IonResource.fromAssetId(17732)}));t.readyPromise.then((function(){e.zoomTo(t),n.doneClassify(e),n.addMouseInteractive(e,t)}))}},{key:"doneClassify",value:function(e){var n=Cesium.Cartesian3.fromRadians(-1.319405732682494,.6988020232990926,18.5);this.addClassifyObject2({viewer:e,position:n,rotAngle:-60,dimensions:new Cesium.Cartesian3(40,70,21),onHoverColor:Cesium.Color.YELLOW})}},{key:"addMouseInteractive",value:function(e,n){(new Cesium.ScreenSpaceEventHandler).setInputAction((function(t){var i=e.camera.getPickRay(t.endPosition),o=e.scene.pickFromRay(i,[n]);console.warn(o)}),Cesium.ScreenSpaceEventType.MOUSE_MOVE)}},{key:"addClassifyObject",value:function(e){var n=null!=e.rotAngle?Cesium.Transforms.headingPitchRollQuaternion(e.position,new Cesium.HeadingPitchRoll(e.rotAngle*Math.PI/180,0,0)):Cesium.Transforms.headingPitchRollQuaternion(e.position,new Cesium.HeadingPitchRoll),t=e.color||Cesium.Color.BLUE,i=e.viewer.entities.add({position:e.position,orientation:n,box:{dimensions:e.dimensions,material:new Cesium.ImageMaterialProperty({image:"./images/riverNormal.jpg",color:t}),outline:!0,outlineColor:t.withAlpha(.7)}});i.onHover=new Cesium.Event,i.onEndHover=new Cesium.Event,i.onHover.addEventListener((function(){null!=e.onClassifitionHover&&e.onClassifitionHover(i),i.box.dimensions=Cesium.Cartesian3.multiplyByScalar(e.dimensions,1.2,new Cesium.Cartesian3),i.box.material.color=e.onHoverColor,i.box.outlineColor=e.onHoverColor.withAlpha(.7)})),i.onEndHover.addEventListener((function(){i.box.dimensions=e.dimensions,i.box.material.color=t,i.box.outlineColor=t.withAlpha(.7)}))}},{key:"addClassifyObject2",value:function(e){null!=e.rotAngle?Cesium.Transforms.headingPitchRollQuaternion(e.position,new Cesium.HeadingPitchRoll(e.rotAngle*Math.PI/180,0,0)):Cesium.Transforms.headingPitchRollQuaternion(e.position,new Cesium.HeadingPitchRoll);var n=e.color||Cesium.Color.BLUE,t=Cesium.Transforms.eastNorthUpToFixedFrame(e.position),i=Cesium.Matrix4.multiplyByMatrix3(t,Cesium.Matrix3.fromRotationZ(null!=e.rotAngle?e.rotAngle*Math.PI/180:0),new Cesium.Matrix4),o=new Cesium.MaterialAppearance({translucent:!1,renderState:{depthMask:!0,blending:Cesium.BlendingState.ALPHA_BLEND},flat:!0});o.material=new Cesium.Material({fabric:{type:"Image",uniforms:{image:"./images/wall.png",color:n}}}),console.warn(o);var r=new Cesium.GeometryInstance({geometry:Cesium.BoxGeometry.fromDimensions({dimensions:e.dimensions,vertexFormat:Cesium.VertexFormat.POSITION_AND_ST})});e.viewer.scene.primitives.add(new Cesium.Primitive({geometryInstances:r,appearance:o,modelMatrix:i}))}}])&&s(t.prototype,i),d&&s(t,d),n}(o.a.Component)}}]);