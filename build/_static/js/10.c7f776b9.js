(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{420:function(e,n){function t(e){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}t.keys=function(){return[]},t.resolve=t,e.exports=t,t.id=420},429:function(e,n,t){"use strict";t.d(n,"a",(function(){return f}));t(51),t(52),t(53),t(122),t(306),t(40),t(417),t(54),t(55),t(41),t(123),t(56),t(307),t(57);var i=t(0),r=t.n(i);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e,n){return(c=Object.setPrototypeOf||function(e,n){return e.__proto__=n,e})(e,n)}function l(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}var m=t(419);window.Cesium=m,t(421);var f=function(e){function n(){var e,t,i,r;!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,n);for(var a=arguments.length,c=new Array(a),m=0;m<a;m++)c[m]=arguments[m];return i=this,t=!(r=(e=s(n)).call.apply(e,[this].concat(c)))||"object"!==o(r)&&"function"!=typeof r?u(i):r,l(u(t),"_viewer",void 0),l(u(t),"state",{beActived:!1}),t}var t,i,m;return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),n&&c(e,n)}(n,e),t=n,m=[{key:"ins",get:function(){var e=this;return null!=this._ins?Promise.resolve(this._ins):new Promise((function(n,t){e.listener.push((function(e){n(e)}))}))}},{key:"__ins",set:function(e){n.listener.length>0&&(n.listener.forEach((function(n){return n(e)})),n.listener=[]),this._ins=e}}],(i=[{key:"componentDidMount",value:function(){0!=this.props.setUp&&this.setUp(),n.__ins=this}},{key:"setUp",value:function(){console.warn("ceisum 启动！！"),this.setState({beActived:!0}),Cesium.Ion.defaultAccessToken="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiJiMzJmNDgwZi1iNmQ2LTQ0NWEtOWRkNi0wODkxYzYxYTg0ZDIiLCJpZCI6ODUzMiwic2NvcGVzIjpbImFzciIsImdjIl0sImlhdCI6MTU1MjIwMjY4OH0.u4d7x0IxZY06ThT4JFmxrfgBxVjQcfI6xXDLu-fsWsY";var e,n=new Cesium.Viewer(this.containerId,p.MAPOPTIONS);return n.cesiumWidget.creditContainer.style.display="none",n.cesiumWidget.screenSpaceEventHandler.removeInputAction(Cesium.ScreenSpaceEventType.LEFT_DOUBLE_CLICK),n.scene.globe.enableLighting=p.global.enableLighting,n.scene.globe.depthTestAgainstTerrain=p.global.depthTestAgainstTerrain,n.scene.highDynamicRange=!0,n.frameUpdate=new Cesium.Event,n.scene.preUpdate.addEventListener((function(t){var i=Date.now(),r=null!=e?i-e:0;e=i,n.frameUpdate.raiseEvent(r)})),null!=this.props.onViewerLoaded&&this.props.onViewerLoaded(n),this._viewer=n,n}},{key:"destroy",value:function(){this.state.beActived&&(this.setState({beActived:!1}),this._viewer&&(console.warn("ceisum destroy！！"),this._viewer.destroy(),this._viewer=null))}},{key:"componentWillUnmount",value:function(){this.destroy()}},{key:"render",value:function(){var e={width:"100%",height:"100%",top:0,left:0,bottom:0,right:0,position:"absolute",display:this.state.beActived?"inline":"none"};return r.a.createElement("div",{id:this.containerId,style:e})}},{key:"containerId",get:function(){return this.props.id||"__cesiumContainer"}},{key:"viewer",get:function(){return this.state.beActived?this._viewer:this.setUp()}}])&&a(t.prototype,i),m&&a(t,m),n}(r.a.Component);l(f,"_ins",void 0),l(f,"listener",[]);var p={ION:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiJhMGRlYTM0ZS0zYjQzLTQ0N2EtYTk4ZS0zNmIwMmU3MDRkNTIiLCJpZCI6MTkzMSwiaWF0IjoxNTMwNzU5NTg3fQ.nt8CVoWjIXTeDM9T6qPs-dM7tb7IWnNc56mzAqhcBBY",global:{enableLighting:!1,depthTestAgainstTerrain:!0},MAPOPTIONS:{imageryProviderViewModels:[new Cesium.ProviderViewModel({name:"Google卫星",iconUrl:"http://img3.cache.netease.com/photo/0031/2012-03-22/7T6QCSPH1CA10031.jpg",tooltip:"Google卫星",creationFunction:function(){return new Cesium.UrlTemplateImageryProvider({url:"http://www.google.cn/maps/vt?lyrs=s&x={x}&y={y}&z={z}",tilingScheme:new Cesium.WebMercatorTilingScheme,minimumLevel:1,maximumLevel:200,credit:"Google Earth"})}})],shouldAnimate:!0,geocoder:!1,shadows:!1,terrainProviderViewModels:[],animation:!1,baseLayerPicker:!1,fullscreenButton:!1,vrButton:!1,homeButton:!1,infoBox:!1,sceneModePicker:!1,selectionIndicator:!1,timeline:!1,navigationHelpButton:!1,terrainShadows:Cesium.ShadowMode.DISABLED}}},432:function(e,n,t){"use strict";t.d(n,"a",(function(){return r}));t(422);function i(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var r=function(){function e(){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e)}var n,t,r;return n=e,r=[{key:"clamp3dtilesToGround",value:function(e,n,t){var i=this;e.scene.camera.viewBoundingSphere(n.boundingSphere);var r=!1;n.allTilesLoaded.addEventListener((function(){if(!r){r=!0;var o=i.pickLowestPostion(e,n.boundingSphere),a=Cesium.Ellipsoid.WGS84.geodeticSurfaceNormal(n.boundingSphere.center),s=Cesium.Cartesian3.multiplyByScalar(a,-o,new Cesium.Cartesian3);n.modelMatrix=Cesium.Matrix4.fromTranslation(s),null!=t&&t(n)}}))}},{key:"pickLowestPostion",value:function(e,n){var t=this,i=new Cesium.EllipsoidTangentPlane(n.center,Cesium.Ellipsoid.WGS84),r=Number.POSITIVE_INFINITY,o=function(n,i,o){for(var a=-1*n;a<n;a+=2){var s=Cesium.Cartesian3.multiplyByScalar(i,a,new Cesium.Cartesian3),u=Cesium.Cartesian3.add(s,o,new Cesium.Cartesian3),c=t.pickPosByNormalDir(u,e);if(null!=c&&null!=c.object){var l=Cesium.Cartographic.fromCartesian(c.position).height;l<r&&(r=l)}}};return o(Math.round(n.radius),i.xAxis,i.origin),o(Math.round(n.radius),i.yAxis,i.origin),r<Number.POSITIVE_INFINITY?r+(r>0?-.2:.2):null}},{key:"pickPosByNormalDir",value:function(e,n){var t=Cesium.Ellipsoid.WGS84.geodeticSurfaceNormal(e,new Cesium.Cartesian3);t=Cesium.Cartesian3.negate(t,t);var i=Cesium.Cartographic.fromCartesian(e),r=Cesium.Cartesian3.fromRadians(i.longitude,i.latitude,i.height+1e3);return n.scene.pickFromRay(new Cesium.Ray(r,t),[])}},{key:"rotationTo",value:function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Cesium.Quaternion,i=new Cesium.Cartesian3,r=Cesium.Cartesian3.UNIT_X,o=Cesium.Cartesian3.UNIT_Y,a=Cesium.Cartesian3.dot(e,n);return a<-.999999?(Cesium.Cartesian3.cross(i,r,e),Cesium.Cartesian3.magnitude(i)<1e-6&&Cesium.Cartesian3.cross(i,o,e),Cesium.Cartesian3.normalize(i,i),Cesium.Quaternion.fromAxisAngle(i,Math.PI,t),t):a>.999999?(t.x=0,t.y=0,t.z=0,t.w=1,t):(Cesium.Cartesian3.cross(i,e,n),t.x=i.x,t.y=i.y,t.z=i.z,t.w=1+a,Cesium.Quaternion.normalize(t,t))}},{key:"unitxyzToRotation",value:function(e,n,t,i){var r,o=e.x,a=n.x,s=t.x,u=e.y,c=n.y,l=t.y,m=e.z,f=n.z,p=t.z,d=o+c+p;return d>0?(r=.5/Math.sqrt(d+1),i.w=.25/r,i.x=(f-l)*r,i.y=(s-m)*r,i.z=(u-a)*r):o>c&&o>p?(r=2*Math.sqrt(1+o-c-p),i.w=(f-l)/r,i.x=.25*r,i.y=(a+u)/r,i.z=(s+m)/r):c>p?(r=2*Math.sqrt(1+c-o-p),i.w=(s-m)/r,i.x=(a+u)/r,i.y=.25*r,i.z=(l+f)/r):(r=2*Math.sqrt(1+p-o-c),i.w=(u-a)/r,i.x=(s+m)/r,i.y=(l+f)/r,i.z=.25*r),i}},{key:"computeMatToWorld",value:function(e,n,t){var i=n||new Cesium.HeadingPitchRoll,r=Cesium.Transforms.headingPitchRollQuaternion(e,i);return Cesium.Matrix4.fromTranslationQuaternionRotationScale(e,r,new Cesium.Cartesian3(1,1,1),t)}},{key:"calculateOrientation",value:function(n,t){var i=new Cesium.Cartesian3;Cesium.Cartesian3.subtract(n,t,i),Cesium.Cartesian3.normalize(i,i);var r=Cesium.Ellipsoid.WGS84.geodeticSurfaceNormal(t,new Cesium.Cartesian3),o=Cesium.Cartesian3.cross(i,r,new Cesium.Cartesian3);Cesium.Cartesian3.normalize(o,o);var a=Cesium.Cartesian3.cross(r,o,new Cesium.Cartesian3);return e.unitxyzToRotation(o,a,r,new Cesium.Quaternion)}}],(t=null)&&i(n.prototype,t),r&&i(n,r),e}()},504:function(e,n,t){"use strict";t.r(n),t.d(n,"default",(function(){return f}));t(51),t(52),t(53),t(122),t(40),t(418),t(54),t(55),t(41),t(56),t(57);var i=t(0),r=t.n(i),o=t(429),a=t(432);function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(e,n){return(m=Object.setPrototypeOf||function(e,n){return e.__proto__=n,e})(e,n)}var f=function(e){function n(){var e,t,i,r,o,a,u;!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,n);for(var m=arguments.length,f=new Array(m),p=0;p<m;p++)f[p]=arguments[p];return i=this,t=!(r=(e=c(n)).call.apply(e,[this].concat(f)))||"object"!==s(r)&&"function"!=typeof r?l(i):r,o=l(t),u=!1,(a="_beMount")in o?Object.defineProperty(o,a,{value:u,enumerable:!0,configurable:!0,writable:!0}):o[a]=u,t}var t,i,f;return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),n&&m(e,n)}(n,e),t=n,(i=[{key:"render",value:function(){return r.a.createElement(o.a,{id:this.constructor.name,onViewerLoaded:this.handleViewerLoaded.bind(this)})}},{key:"handleViewerLoaded",value:function(e){var n=this;e.scene.primitives.add(new Cesium.Cesium3DTileset({url:"http://cloudv2bucket.oss-cn-shanghai.aliyuncs.com/185/1254/resultCC/Production_1.json",maximumScreenSpaceError:.8,maximumNumberOfLoadedTiles:100})).readyPromise.then((function(t){n._beMount&&a.a.clamp3dtilesToGround(e,t,(function(n){e.scene.camera.flyToBoundingSphere(n.boundingSphere)}))}))}},{key:"componentDidMount",value:function(){this._beMount=!0}},{key:"componentWillUnmount",value:function(){this._beMount=!1}}])&&u(t.prototype,i),f&&u(t,f),n}(r.a.Component)}}]);