(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{420:function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=420},429:function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));n(51),n(52),n(53),n(122),n(306),n(40),n(417),n(54),n(55),n(41),n(123),n(56),n(307),n(57);var i=n(0),r=n.n(i);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var m=n(419);window.Cesium=m,n(421);var f=function(e){function t(){var e,n,i,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var s=arguments.length,a=new Array(s),m=0;m<s;m++)a[m]=arguments[m];return i=this,n=!(r=(e=c(t)).call.apply(e,[this].concat(a)))||"object"!==o(r)&&"function"!=typeof r?u(i):r,l(u(n),"_viewer",void 0),l(u(n),"state",{beActived:!1}),n}var n,i,m;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(t,e),n=t,m=[{key:"ins",get:function(){var e=this;return null!=this._ins?Promise.resolve(this._ins):new Promise((function(t,n){e.listener.push((function(e){t(e)}))}))}},{key:"__ins",set:function(e){t.listener.length>0&&(t.listener.forEach((function(t){return t(e)})),t.listener=[]),this._ins=e}}],(i=[{key:"componentDidMount",value:function(){0!=this.props.setUp&&this.setUp(),t.__ins=this}},{key:"setUp",value:function(){console.warn("ceisum 启动！！"),this.setState({beActived:!0}),Cesium.Ion.defaultAccessToken="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiJiMzJmNDgwZi1iNmQ2LTQ0NWEtOWRkNi0wODkxYzYxYTg0ZDIiLCJpZCI6ODUzMiwic2NvcGVzIjpbImFzciIsImdjIl0sImlhdCI6MTU1MjIwMjY4OH0.u4d7x0IxZY06ThT4JFmxrfgBxVjQcfI6xXDLu-fsWsY";var e,t=new Cesium.Viewer(this.containerId,d.MAPOPTIONS);return t.cesiumWidget.creditContainer.style.display="none",t.cesiumWidget.screenSpaceEventHandler.removeInputAction(Cesium.ScreenSpaceEventType.LEFT_DOUBLE_CLICK),t.scene.globe.enableLighting=d.global.enableLighting,t.scene.globe.depthTestAgainstTerrain=d.global.depthTestAgainstTerrain,t.scene.highDynamicRange=!0,t.frameUpdate=new Cesium.Event,t.scene.preUpdate.addEventListener((function(n){var i=Date.now(),r=null!=e?i-e:0;e=i,t.frameUpdate.raiseEvent(r)})),null!=this.props.onViewerLoaded&&this.props.onViewerLoaded(t),this._viewer=t,t}},{key:"destroy",value:function(){this.state.beActived&&(this.setState({beActived:!1}),this._viewer&&(console.warn("ceisum destroy！！"),this._viewer.destroy(),this._viewer=null))}},{key:"componentWillUnmount",value:function(){this.destroy()}},{key:"render",value:function(){var e={width:"100%",height:"100%",top:0,left:0,bottom:0,right:0,position:"absolute",display:this.state.beActived?"inline":"none"};return r.a.createElement("div",{id:this.containerId,style:e})}},{key:"containerId",get:function(){return this.props.id||"__cesiumContainer"}},{key:"viewer",get:function(){return this.state.beActived?this._viewer:this.setUp()}}])&&s(n.prototype,i),m&&s(n,m),t}(r.a.Component);l(f,"_ins",void 0),l(f,"listener",[]);var d={ION:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiJhMGRlYTM0ZS0zYjQzLTQ0N2EtYTk4ZS0zNmIwMmU3MDRkNTIiLCJpZCI6MTkzMSwiaWF0IjoxNTMwNzU5NTg3fQ.nt8CVoWjIXTeDM9T6qPs-dM7tb7IWnNc56mzAqhcBBY",global:{enableLighting:!1,depthTestAgainstTerrain:!0},MAPOPTIONS:{imageryProviderViewModels:[new Cesium.ProviderViewModel({name:"Google卫星",iconUrl:"http://img3.cache.netease.com/photo/0031/2012-03-22/7T6QCSPH1CA10031.jpg",tooltip:"Google卫星",creationFunction:function(){return new Cesium.UrlTemplateImageryProvider({url:"http://www.google.cn/maps/vt?lyrs=s&x={x}&y={y}&z={z}",tilingScheme:new Cesium.WebMercatorTilingScheme,minimumLevel:1,maximumLevel:200,credit:"Google Earth"})}})],shouldAnimate:!0,geocoder:!1,shadows:!1,terrainProviderViewModels:[],animation:!1,baseLayerPicker:!1,fullscreenButton:!1,vrButton:!1,homeButton:!1,infoBox:!1,sceneModePicker:!1,selectionIndicator:!1,timeline:!1,navigationHelpButton:!1,terrainShadows:Cesium.ShadowMode.DISABLED}}},506:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return f}));n(51),n(52),n(53),n(122),n(40),n(418),n(54),n(55),n(41),n(56),n(57);var i=n(0),r=n.n(i),o=n(429);function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function a(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var f=function(e){function t(){var e,n,i,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,c=new Array(o),l=0;l<o;l++)c[l]=arguments[l];return i=this,n=!(r=(e=u(t)).call.apply(e,[this].concat(c)))||"object"!==s(r)&&"function"!=typeof r?a(i):r,m(a(n),"currentId",void 0),m(a(n),"currentPirmitive",void 0),m(a(n),"currentColor",void 0),m(a(n),"_beMount",!1),n}var n,i,f;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(t,e),n=t,(i=[{key:"render",value:function(){return r.a.createElement(o.a,{id:this.constructor.name,onViewerLoaded:this.handleViewerLoaded.bind(this)})}},{key:"handleViewerLoaded",value:function(e){var t=this,n=e.scene.primitives.add(new Cesium.Cesium3DTileset({url:Cesium.IonResource.fromAssetId(17732)}));n.readyPromise.then((function(){if(t._beMount){e.zoomTo(n),t.doneClassify(e);var i=t.addMouseInteractive(e,n);t.componentWillUnmount=function(){i.destroy()}}}))}},{key:"doneClassify",value:function(e){var t=e.scene;t.primitives.add(new Cesium.ClassificationPrimitive({geometryInstances:new Cesium.GeometryInstance({geometry:new Cesium.PolygonGeometry({polygonHierarchy:new Cesium.PolygonHierarchy(Cesium.Cartesian3.fromRadiansArray([-1.3194099316314372,.6987968432881184,-1.3193974274016789,.6988021105858696,-1.319401631614801,.6988076344398017,-1.319413889290215,.6988023356648352])),height:0,extrudedHeight:30,vertexFormat:Cesium.PerInstanceColorAppearance.VERTEX_FORMAT}),attributes:{color:Cesium.ColorGeometryInstanceAttribute.fromColor(new Cesium.Color(1,0,0,.5)),show:new Cesium.ShowGeometryInstanceAttribute(!0)},id:"c2"}),classificationType:Cesium.ClassificationType.CESIUM_3D_TILE})),t.primitives.add(new Cesium.ClassificationPrimitive({geometryInstances:new Cesium.GeometryInstance({geometry:new Cesium.PolygonGeometry({polygonHierarchy:new Cesium.PolygonHierarchy(Cesium.Cartesian3.fromRadiansArray([-1.3194146508025428,.6987972336626,-1.3194127494954553,.6987980135676406,-1.3194140066218585,.6987998137240734,-1.3194158443512902,.698798876642071])),height:0,extrudedHeight:13,vertexFormat:Cesium.PerInstanceColorAppearance.VERTEX_FORMAT}),attributes:{color:Cesium.ColorGeometryInstanceAttribute.fromColor(new Cesium.Color(0,1,0,.5)),show:new Cesium.ShowGeometryInstanceAttribute(!0)},id:"c1"}),classificationType:Cesium.ClassificationType.CESIUM_3D_TILE}))}},{key:"addMouseInteractive",value:function(e,t){var n=this,i=new Cesium.ScreenSpaceEventHandler;return i.setInputAction((function(i){var r=e.camera.getPickRay(i.endPosition),o=e.scene.pickFromRay(r,[t]);if(null!=o&&null!=o.object&&null!=o.object.id){if(o.object.id!=n.currentId){n.currentId&&n.currentPirmitive&&(n.currentPirmitive.getGeometryInstanceAttributes(n.currentId).color=n.currentColor,n.currentId=null);var s=o.object.primitive;if(s instanceof Cesium.ClassificationPrimitive){var c=s.getGeometryInstanceAttributes(o.object.id);n.currentPirmitive=s,n.currentId=o.object.id,n.currentColor=c.color,c.color=Cesium.ColorGeometryInstanceAttribute.toValue(Cesium.Color.AQUA.withAlpha(.5))}}}else n.currentId&&n.currentPirmitive&&(n.currentPirmitive.getGeometryInstanceAttributes(n.currentId).color=n.currentColor,n.currentId=null)}),Cesium.ScreenSpaceEventType.MOUSE_MOVE),i}},{key:"componentDidMount",value:function(){this._beMount=!0}},{key:"componentWillUnmount",value:function(){this._beMount=!1}}])&&c(n.prototype,i),f&&c(n,f),t}(r.a.Component)}}]);