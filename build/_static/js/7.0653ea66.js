(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{420:function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=420},429:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));n(51),n(52),n(53),n(122),n(306),n(40),n(417),n(54),n(55),n(41),n(123),n(56),n(307),n(57);var i=n(0),r=n.n(i);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var p=n(419);window.Cesium=p,n(421);var d=function(e){function t(){var e,n,i,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,c=new Array(a),p=0;p<a;p++)c[p]=arguments[p];return i=this,n=!(r=(e=s(t)).call.apply(e,[this].concat(c)))||"object"!==o(r)&&"function"!=typeof r?u(i):r,l(u(n),"_viewer",void 0),l(u(n),"state",{beActived:!1}),n}var n,i,p;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,e),n=t,p=[{key:"ins",get:function(){var e=this;return null!=this._ins?Promise.resolve(this._ins):new Promise((function(t,n){e.listener.push((function(e){t(e)}))}))}},{key:"__ins",set:function(e){t.listener.length>0&&(t.listener.forEach((function(t){return t(e)})),t.listener=[]),this._ins=e}}],(i=[{key:"componentDidMount",value:function(){0!=this.props.setUp&&this.setUp(),t.__ins=this}},{key:"setUp",value:function(){console.warn("ceisum 启动！！"),this.setState({beActived:!0}),Cesium.Ion.defaultAccessToken="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiJiMzJmNDgwZi1iNmQ2LTQ0NWEtOWRkNi0wODkxYzYxYTg0ZDIiLCJpZCI6ODUzMiwic2NvcGVzIjpbImFzciIsImdjIl0sImlhdCI6MTU1MjIwMjY4OH0.u4d7x0IxZY06ThT4JFmxrfgBxVjQcfI6xXDLu-fsWsY";var e,t=new Cesium.Viewer(this.containerId,f.MAPOPTIONS);return t.cesiumWidget.creditContainer.style.display="none",t.cesiumWidget.screenSpaceEventHandler.removeInputAction(Cesium.ScreenSpaceEventType.LEFT_DOUBLE_CLICK),t.scene.globe.enableLighting=f.global.enableLighting,t.scene.globe.depthTestAgainstTerrain=f.global.depthTestAgainstTerrain,t.scene.highDynamicRange=!0,t.frameUpdate=new Cesium.Event,t.scene.preUpdate.addEventListener((function(n){var i=Date.now(),r=null!=e?i-e:0;e=i,t.frameUpdate.raiseEvent(r)})),null!=this.props.onViewerLoaded&&this.props.onViewerLoaded(t),this._viewer=t,t}},{key:"destroy",value:function(){this.state.beActived&&(this.setState({beActived:!1}),this._viewer&&(console.warn("ceisum destroy！！"),this._viewer.destroy(),this._viewer=null))}},{key:"componentWillUnmount",value:function(){this.destroy()}},{key:"render",value:function(){var e={width:"100%",height:"100%",top:0,left:0,bottom:0,right:0,position:"absolute",display:this.state.beActived?"inline":"none"};return r.a.createElement("div",{id:this.containerId,style:e})}},{key:"containerId",get:function(){return this.props.id||"__cesiumContainer"}},{key:"viewer",get:function(){return this.state.beActived?this._viewer:this.setUp()}}])&&a(n.prototype,i),p&&a(n,p),t}(r.a.Component);l(d,"_ins",void 0),l(d,"listener",[]);var f={ION:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiJhMGRlYTM0ZS0zYjQzLTQ0N2EtYTk4ZS0zNmIwMmU3MDRkNTIiLCJpZCI6MTkzMSwiaWF0IjoxNTMwNzU5NTg3fQ.nt8CVoWjIXTeDM9T6qPs-dM7tb7IWnNc56mzAqhcBBY",global:{enableLighting:!1,depthTestAgainstTerrain:!0},MAPOPTIONS:{imageryProviderViewModels:[new Cesium.ProviderViewModel({name:"Google卫星",iconUrl:"http://img3.cache.netease.com/photo/0031/2012-03-22/7T6QCSPH1CA10031.jpg",tooltip:"Google卫星",creationFunction:function(){return new Cesium.UrlTemplateImageryProvider({url:"http://www.google.cn/maps/vt?lyrs=s&x={x}&y={y}&z={z}",tilingScheme:new Cesium.WebMercatorTilingScheme,minimumLevel:1,maximumLevel:200,credit:"Google Earth"})}})],shouldAnimate:!0,geocoder:!1,shadows:!1,terrainProviderViewModels:[],animation:!1,baseLayerPicker:!1,fullscreenButton:!1,vrButton:!1,homeButton:!1,infoBox:!1,sceneModePicker:!1,selectionIndicator:!1,timeline:!1,navigationHelpButton:!1,terrainShadows:Cesium.ShadowMode.DISABLED}}},432:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));n(422);function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"clamp3dtilesToGround",value:function(e,t,n){var i=this;e.scene.camera.viewBoundingSphere(t.boundingSphere);var r=!1;t.allTilesLoaded.addEventListener((function(){if(!r){r=!0;var o=i.pickLowestPostion(e,t.boundingSphere),a=Cesium.Ellipsoid.WGS84.geodeticSurfaceNormal(t.boundingSphere.center),s=Cesium.Cartesian3.multiplyByScalar(a,-o,new Cesium.Cartesian3);t.modelMatrix=Cesium.Matrix4.fromTranslation(s),null!=n&&n(t)}}))}},{key:"pickLowestPostion",value:function(e,t){var n=this,i=new Cesium.EllipsoidTangentPlane(t.center,Cesium.Ellipsoid.WGS84),r=Number.POSITIVE_INFINITY,o=function(t,i,o){for(var a=-1*t;a<t;a+=2){var s=Cesium.Cartesian3.multiplyByScalar(i,a,new Cesium.Cartesian3),u=Cesium.Cartesian3.add(s,o,new Cesium.Cartesian3),c=n.pickPosByNormalDir(u,e);if(null!=c&&null!=c.object){var l=Cesium.Cartographic.fromCartesian(c.position).height;l<r&&(r=l)}}};return o(Math.round(t.radius),i.xAxis,i.origin),o(Math.round(t.radius),i.yAxis,i.origin),r<Number.POSITIVE_INFINITY?r+(r>0?-.2:.2):null}},{key:"pickPosByNormalDir",value:function(e,t){var n=Cesium.Ellipsoid.WGS84.geodeticSurfaceNormal(e,new Cesium.Cartesian3);n=Cesium.Cartesian3.negate(n,n);var i=Cesium.Cartographic.fromCartesian(e),r=Cesium.Cartesian3.fromRadians(i.longitude,i.latitude,i.height+1e3);return t.scene.pickFromRay(new Cesium.Ray(r,n),[])}},{key:"rotationTo",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Cesium.Quaternion,i=new Cesium.Cartesian3,r=Cesium.Cartesian3.UNIT_X,o=Cesium.Cartesian3.UNIT_Y,a=Cesium.Cartesian3.dot(e,t);return a<-.999999?(Cesium.Cartesian3.cross(i,r,e),Cesium.Cartesian3.magnitude(i)<1e-6&&Cesium.Cartesian3.cross(i,o,e),Cesium.Cartesian3.normalize(i,i),Cesium.Quaternion.fromAxisAngle(i,Math.PI,n),n):a>.999999?(n.x=0,n.y=0,n.z=0,n.w=1,n):(Cesium.Cartesian3.cross(i,e,t),n.x=i.x,n.y=i.y,n.z=i.z,n.w=1+a,Cesium.Quaternion.normalize(n,n))}},{key:"unitxyzToRotation",value:function(e,t,n,i){var r,o=e.x,a=t.x,s=n.x,u=e.y,c=t.y,l=n.y,p=e.z,d=t.z,f=n.z,m=o+c+f;return m>0?(r=.5/Math.sqrt(m+1),i.w=.25/r,i.x=(d-l)*r,i.y=(s-p)*r,i.z=(u-a)*r):o>c&&o>f?(r=2*Math.sqrt(1+o-c-f),i.w=(d-l)/r,i.x=.25*r,i.y=(a+u)/r,i.z=(s+p)/r):c>f?(r=2*Math.sqrt(1+c-o-f),i.w=(s-p)/r,i.x=(a+u)/r,i.y=.25*r,i.z=(l+d)/r):(r=2*Math.sqrt(1+f-o-c),i.w=(u-a)/r,i.x=(s+p)/r,i.y=(l+d)/r,i.z=.25*r),i}},{key:"computeMatToWorld",value:function(e,t,n){var i=t||new Cesium.HeadingPitchRoll,r=Cesium.Transforms.headingPitchRollQuaternion(e,i);return Cesium.Matrix4.fromTranslationQuaternionRotationScale(e,r,new Cesium.Cartesian3(1,1,1),n)}},{key:"calculateOrientation",value:function(t,n){var i=new Cesium.Cartesian3;Cesium.Cartesian3.subtract(t,n,i),Cesium.Cartesian3.normalize(i,i);var r=Cesium.Ellipsoid.WGS84.geodeticSurfaceNormal(n,new Cesium.Cartesian3),o=Cesium.Cartesian3.cross(i,r,new Cesium.Cartesian3);Cesium.Cartesian3.normalize(o,o);var a=Cesium.Cartesian3.cross(r,o,new Cesium.Cartesian3);return e.unitxyzToRotation(o,a,r,new Cesium.Quaternion)}}],(n=null)&&i(t.prototype,n),r&&i(t,r),e}()},449:function(e,t,n){var i=n(12),r=n(428);i({global:!0,forced:parseFloat!=r},{parseFloat:r})},450:function(e){e.exports=JSON.parse('{"data":[{"longitude":"121.604695","latitude":"31.186415"},{"longitude":"121.605923","latitude":"31.186516"},{"longitude":"121.607121","latitude":"31.186969"},{"longitude":"121.607583","latitude":"31.187736"},{"longitude":"121.607744","latitude":"31.188857"},{"longitude":"121.607549","latitude":"31.187633"},{"longitude":"121.607013","latitude":"31.186898"},{"longitude":"121.606003","latitude":"31.186504"},{"longitude":"121.604696","latitude":"31.186408"}],"type":"line"}')},451:function(e,t,n){"use strict";var i=n(12),r=n(89),o=[].reverse,a=[1,2];i({target:"Array",proto:!0,forced:String(a)===String(a.reverse())},{reverse:function(){return r(this)&&(this.length=this.length),o.call(this)}})},519:function(e,t,n){"use strict";n.r(t);n(51),n(52),n(53),n(40),n(418),n(54),n(55),n(41),n(449),n(56),n(57);var i,r=n(0),o=n.n(r),a=n(429),s=n(450),u=(n(423),n(306),n(451),n(424),n(425),n(426),n(307),n(432));function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function l(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}!function(e){e[e.pingpong=0]="pingpong",e[e.restart=1]="restart"}(i||(i={}));var d=function(){function e(t,n){var r=this;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),p(this,"ins",void 0),p(this,"options",void 0),p(this,"currentDir",void 0),p(this,"curPos",void 0),p(this,"curPointIndex",void 0),p(this,"loop",(function(e){if(r.beActived){var t=r.options,n=t.pointArr,o=t.speed,a=Cesium.Cartesian3.multiplyByScalar(r.currentDir,o*e,new Cesium.Cartesian3),s=Cesium.Cartesian3.add(r.curPos,a,new Cesium.Cartesian3),c=Cesium.Cartesian3.distance(n[r.curPointIndex],n[r.curPointIndex+1]);if(Cesium.Cartesian3.distance(n[r.curPointIndex],s)>=c){r.curPointIndex++,r.curPointIndex>=n.length-1&&(r.curPointIndex=0,r.options.loopType==i.pingpong&&n.reverse()),s=Cesium.Cartesian3.clone(n[r.curPointIndex]),r.currentDir=r.calculateDirection(n[r.curPointIndex+1],n[r.curPointIndex]);var l=u.a.calculateOrientation(n[r.curPointIndex+1],n[r.curPointIndex]);r.ins.orientation=Cesium.Quaternion.multiply(l,r.options.initRot,new Cesium.Quaternion)}r.ins.position=s,r.curPos=s}})),p(this,"beActived",!1),t.frameUpdate.addEventListener(this.loop),this.options=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(n,!0).forEach((function(t){p(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},n,{initRot:null!=n.initRot?n.initRot:Cesium.Quaternion.IDENTITY,loopType:null!=n.loopType?n.loopType:i.pingpong}),this.options.ins instanceof Cesium.Entity)this.ins=this.options.ins;else{var o=this.options.ins;this.ins=t.entities.add({position:o.pos?o.pos:Cesium.Cartesian3.ZERO,orientation:Cesium.Quaternion.IDENTITY,model:{uri:o.url,scale:null!=o.scale?o.scale:1}})}this.dispose=function(){t.frameUpdate.removeEventListener(r.loop)},this.currentDir=this.calculateDirection(n.pointArr[1],n.pointArr[0]),this.curPointIndex=0,this.curPos=Cesium.Cartesian3.clone(n.pointArr[0]);var a=u.a.calculateOrientation(n.pointArr[this.curPointIndex+1],n.pointArr[this.curPointIndex]);this.ins.orientation=Cesium.Quaternion.multiply(a,this.options.initRot,new Cesium.Quaternion),this.active()}var t,n,r;return t=e,(n=[{key:"active",value:function(){this.beActived=!0}},{key:"disActive",value:function(){this.beActived=!1}},{key:"dispose",value:function(){}},{key:"calculateDirection",value:function(e,t){var n=Cesium.Cartesian3.subtract(e,t,new Cesium.Cartesian3);return Cesium.Cartesian3.normalize(n,n),n}}])&&l(t.prototype,n),r&&l(t,r),e}();function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function h(e,t){return!t||"object"!==f(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function C(e,t){return(C=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}n.d(t,"default",(function(){return v}));var v=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),h(this,y(t).apply(this,arguments))}var n,i,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&C(e,t)}(t,e),n=t,(i=[{key:"render",value:function(){return o.a.createElement(a.a,{id:this.constructor.name,onViewerLoaded:this.handleViewerLoaded.bind(this)})}},{key:"handleViewerLoaded",value:function(e){for(var t=[],n=s.data,i=0;i<n.length;i++){var r=n[i];t.push(parseFloat(r.longitude)*Math.PI/180),t.push(parseFloat(r.latitude)*Math.PI/180),t.push(2)}var o=Cesium.Cartesian3.fromRadiansArrayHeights(t);new d(e,{ins:{url:"./models/ship/scene.gltf",scale:2.5},speed:.01,pointArr:o});var a=Cesium.BoundingSphere.fromPoints(o);e.scene.camera.flyToBoundingSphere(new Cesium.BoundingSphere(a.center,2*a.radius))}}])&&m(n.prototype,i),r&&m(n,r),t}(o.a.Component)}}]);