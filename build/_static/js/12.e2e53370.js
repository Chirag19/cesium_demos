(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{433:function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=433},469:function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));n(59),n(60),n(61),n(132),n(38),n(62),n(63),n(46),n(133),n(64),n(326),n(65);var i=n(0),r=n.n(i);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var p=n(432);window.Cesium=p,n(434);var m=function(e){function t(){var e,n,i,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,c=new Array(a),p=0;p<a;p++)c[p]=arguments[p];return i=this,n=!(r=(e=s(t)).call.apply(e,[this].concat(c)))||"object"!==o(r)&&"function"!=typeof r?u(i):r,l(u(n),"_viewer",void 0),l(u(n),"state",{beActived:!1}),n}var n,i,p;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,e),n=t,p=[{key:"ins",get:function(){var e=this;return null!=this._ins?Promise.resolve(this._ins):new Promise((function(t,n){e.listener.push((function(e){t(e)}))}))}},{key:"__ins",set:function(e){t.listener.length>0&&(t.listener.forEach((function(t){return t(e)})),t.listener=[]),this._ins=e}}],(i=[{key:"componentDidMount",value:function(){0!=this.props.setUp&&this.setUp(),t.__ins=this}},{key:"setUp",value:function(){console.warn("ceisum 启动！！"),this.setState({beActived:!0}),Cesium.Ion.defaultAccessToken="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiJiMzJmNDgwZi1iNmQ2LTQ0NWEtOWRkNi0wODkxYzYxYTg0ZDIiLCJpZCI6ODUzMiwic2NvcGVzIjpbImFzciIsImdjIl0sImlhdCI6MTU1MjIwMjY4OH0.u4d7x0IxZY06ThT4JFmxrfgBxVjQcfI6xXDLu-fsWsY";var e,t=new Cesium.Viewer(this.containerId,f.MAPOPTIONS);return t.cesiumWidget.creditContainer.style.display="none",t.cesiumWidget.screenSpaceEventHandler.removeInputAction(Cesium.ScreenSpaceEventType.LEFT_DOUBLE_CLICK),t.scene.globe.enableLighting=f.global.enableLighting,t.scene.globe.depthTestAgainstTerrain=f.global.depthTestAgainstTerrain,t.scene.highDynamicRange=!0,t.frameUpdate=new Cesium.Event,t.scene.preUpdate.addEventListener((function(n){var i=Date.now(),r=null!=e?i-e:0;e=i,t.frameUpdate.raiseEvent(r)})),null!=this.props.onViewerLoaded&&this.props.onViewerLoaded(t),this._viewer=t,t}},{key:"destroy",value:function(){this.state.beActived&&(this.setState({beActived:!1}),this._viewer&&(console.warn("ceisum destroy！！"),this._viewer.destroy(),this._viewer=null))}},{key:"componentWillUnmount",value:function(){this.destroy()}},{key:"render",value:function(){var e={width:"100%",height:"100%",top:0,left:0,bottom:0,right:0,position:"absolute",display:this.state.beActived?"inline":"none"};return r.a.createElement("div",{id:this.containerId,style:e})}},{key:"containerId",get:function(){return this.props.id||"__cesiumContainer"}},{key:"viewer",get:function(){return this.state.beActived?this._viewer:this.setUp()}}])&&a(n.prototype,i),p&&a(n,p),t}(r.a.Component);l(m,"_ins",void 0),l(m,"listener",[]);var f={ION:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiJhMGRlYTM0ZS0zYjQzLTQ0N2EtYTk4ZS0zNmIwMmU3MDRkNTIiLCJpZCI6MTkzMSwiaWF0IjoxNTMwNzU5NTg3fQ.nt8CVoWjIXTeDM9T6qPs-dM7tb7IWnNc56mzAqhcBBY",global:{enableLighting:!1,depthTestAgainstTerrain:!0},MAPOPTIONS:{imageryProviderViewModels:[new Cesium.ProviderViewModel({name:"Google卫星",iconUrl:"http://img3.cache.netease.com/photo/0031/2012-03-22/7T6QCSPH1CA10031.jpg",tooltip:"Google卫星",creationFunction:function(){return new Cesium.UrlTemplateImageryProvider({url:"http://www.google.cn/maps/vt?lyrs=s&x={x}&y={y}&z={z}",tilingScheme:new Cesium.WebMercatorTilingScheme,minimumLevel:1,maximumLevel:200,credit:"Google Earth"})}})],shouldAnimate:!0,geocoder:!1,shadows:!1,terrainProviderViewModels:[],animation:!1,baseLayerPicker:!1,fullscreenButton:!1,vrButton:!1,homeButton:!1,infoBox:!1,sceneModePicker:!1,selectionIndicator:!1,timeline:!1,navigationHelpButton:!1,terrainShadows:Cesium.ShadowMode.DISABLED}}},477:function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));n(59),n(60),n(61),n(132),n(38),n(441),n(62),n(63),n(46),n(64),n(442),n(443),n(444),n(445),n(446),n(447),n(448),n(449),n(450),n(451),n(452),n(453),n(454),n(455),n(456),n(457),n(458),n(459),n(460),n(461),n(462),n(463),n(464),n(465),n(466),n(467),n(65);var i=n(0),r=n.n(i);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function u(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),e}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var f=function(e){function t(){var e,n,i,r;a(this,t);for(var s=arguments.length,u=new Array(s),p=0;p<s;p++)u[p]=arguments[p];return i=this,n=!(r=(e=c(t)).call.apply(e,[this].concat(u)))||"object"!==o(r)&&"function"!=typeof r?l(i):r,m(l(n),"primitiveIns",void 0),m(l(n),"_aspect",1.3),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(t,e),u(t,[{key:"componentDidMount",value:function(){var e=this.props.editorInfo,t=document.getElementById("video_dom"),n=y.creacteVideoPrimitive(t);if(this.props.viewer.scene.primitives.add(n),this.primitiveIns=n,null!=e){var i=e;this._aspect=i.aspect;var r=new Cesium.Cartesian3(i.pos[0],i.pos[1],i.pos[2]),o=new Cesium.Quaternion(i.quat[0],i.quat[1],i.quat[2],i.quat[3]),a=Cesium.Matrix4.fromTranslationRotationScale(new Cesium.TranslationRotationScale(r,o,new Cesium.Cartesian3(1*i.aspect,1,1)),new Cesium.Matrix4);this.modelMatrix=a}else{this._aspect=null!=this.props.aspect?this.props.aspect:1.3;var s=Cesium.Matrix4.fromTranslationRotationScale(new Cesium.TranslationRotationScale(this.props.postion,this.props.quat,new Cesium.Cartesian3(1*this._aspect,1,1)),new Cesium.Matrix4);this.modelMatrix=s}}},{key:"show",value:function(){this.primitiveIns.show=!0}},{key:"hide",value:function(){this.primitiveIns.show=!1}},{key:"render",value:function(){return r.a.createElement("video",{id:"video_dom",preload:"auto",style:{display:"none",position:"absolute",top:"30vh",left:"30vw",transform:"translate(-50%,-50%)",width:"70vw"},autoPlay:!0,loop:!0,controls:!1},r.a.createElement("source",{src:this.props.url,type:"video/mp4"}),"Your browser does not support the ",r.a.createElement("code",null,"video")," element.")}},{key:"opacity",set:function(e){this.primitiveIns.appearance.material.uniforms.color=new Cesium.Color(1,1,1,e)}},{key:"color",set:function(e){this.primitiveIns.appearance.material.uniforms.color=e}},{key:"aspect",set:function(e){this._aspect=e;var t=Cesium.Matrix4.fromTranslationRotationScale(new Cesium.TranslationRotationScale(this.props.postion,this.props.quat,new Cesium.Cartesian3(1*this._aspect,1,1)),new Cesium.Matrix4);this.primitiveIns.modelMatrix=t},get:function(){return this._aspect}},{key:"modelMatrix",set:function(e){this.primitiveIns.modelMatrix=e},get:function(){return this.primitiveIns.modelMatrix}}]),t}(r.a.Component),y=function(){function e(){a(this,e)}return u(e,null,[{key:"creacteVideoPrimitive",value:function(t,n){n=n||{};var i=e.createGeometryInstance(n.insModelMatrix),r=e.createAppearance(t);return new Cesium.Primitive({geometryInstances:i,appearance:r,asynchronous:!1,modelMatrix:n.primitiveModelMatrix,show:!0})}},{key:"createGeometryInstance",value:function(e){return new Cesium.GeometryInstance({geometry:this.geometry,modelMatrix:e})}},{key:"createAppearance",value:function(e){var t=new Cesium.Material({fabric:{type:"custome_1",uniforms:{color:new Cesium.Color(1,1,1,1),image:"./images/arrow.png",tmask:"./libAssets/tMask.jpg"},source:"czm_material czm_getMaterial(czm_materialInput materialInput)\n        {\n             czm_material material = czm_getDefaultMaterial(materialInput);\n             vec2 st = materialInput.st;\n             vec4 colorImage = texture2D(image, vec2(st.s, st.t));\n             vec4 maskImage = texture2D(tmask, vec2(st.s, st.t));\n             material.alpha = colorImage.a * color.a*maskImage.r;\n             material.diffuse = colorImage.rgb*color.rgb;\n             return material;\n         }"}});return t.uniforms.image=e,new Cesium.EllipsoidSurfaceAppearance({material:t,flat:!0,renderState:{cull:{enabled:!1},depthTest:{enabled:!1}}})}},{key:"creacteGeometry",value:function(e,t){var n=e/2,i=t/2,r=new Float64Array([n,0,i,-n,0,i,-n,0,-i,n,0,-i]),o=new Float32Array([1,1,0,1,0,0,1,0]),a=new Uint16Array([0,1,2,0,2,3]);return this._createGeometry(r,o,a)}},{key:"_createGeometry",value:function(e,t,n){return new Cesium.Geometry({attributes:{position:new Cesium.GeometryAttribute({componentDatatype:Cesium.ComponentDatatype.DOUBLE,componentsPerAttribute:3,values:e}),st:new Cesium.GeometryAttribute({componentDatatype:Cesium.ComponentDatatype.FLOAT,componentsPerAttribute:2,values:t})},indices:n,primitiveType:Cesium.PrimitiveType.TRIANGLES,boundingSphere:Cesium.BoundingSphere.fromVertices(e)})}},{key:"geometry",get:function(){return null==this._geometry&&(this._geometry=this.creacteGeometry(10,10)),this._geometry}}]),e}();m(y,"_geometry",void 0)},519:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return m}));n(59),n(60),n(61),n(132),n(38),n(431),n(62),n(63),n(46),n(64),n(65);var i=n(0),r=n.n(i),o=n(469),a=n(477);function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var m=function(e){function t(){var e,n,i,r,o,a,u;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var p=arguments.length,m=new Array(p),f=0;f<p;f++)m[f]=arguments[f];return i=this,n=!(r=(e=c(t)).call.apply(e,[this].concat(m)))||"object"!==s(r)&&"function"!=typeof r?l(i):r,o=l(n),a="state",u={viewer:null,opacity:.5,pos:new Cesium.Cartesian3(-2862001.0959806717,4651306.438826122,3283702.9141938747),quat:new Cesium.Quaternion(-.3554680319936638,.3186025875155842,.8575975474538291,.1914714497258105),aspect:1.7979678238780694,editorInfo:{aspect:1.7979678238780694,cameraOffset:30.00000000036392,pos:[-2861999.8843600666,4651308.262380583,3283701.9702296667],quat:[-.35565499986088944,.3184325958649666,.8574897840777559,.19188922108063622],cameraPositon:[-2861983.216648571,4651329.969133107,3283689.681849448],cameraHeadPithRoll:[1.0240711517455319,-.06604407712253324,.002514721490340044],cameraFov:.8979678238780694}},a in o?Object.defineProperty(o,a,{value:u,enumerable:!0,configurable:!0,writable:!0}):o[a]=u,n}var n,i,m;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(t,e),n=t,(i=[{key:"handleViewerLoaded",value:function(e){this.setState({viewer:e}),e.scene.primitives.add(new Cesium.Cesium3DTileset({url:"http://cloudv2bucket.oss-cn-shanghai.aliyuncs.com/185/1254/resultCC/Production_1.json",maximumScreenSpaceError:.8,maximumNumberOfLoadedTiles:100}));var t=this.state.editorInfo;e.camera.frustum.fov=t.cameraFov,e.camera.setView({destination:new Cesium.Cartesian3(t.cameraPositon[0],t.cameraPositon[1],t.cameraPositon[2]),orientation:{heading:t.cameraHeadPithRoll[0],pitch:t.cameraHeadPithRoll[1],roll:t.cameraHeadPithRoll[2]}})}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(o.a,{id:this.constructor.name,onViewerLoaded:this.handleViewerLoaded.bind(this)}),this.state.viewer?r.a.createElement(a.a,{ref:"VideoFusion",editorInfo:this.state.editorInfo,aspect:this.state.aspect,postion:this.state.pos,quat:this.state.quat,url:"./videos/videoFusion.mp4",viewer:this.state.viewer}):null)}},{key:"videoFusionIns",get:function(){return this.refs.VideoFusion}}])&&u(n.prototype,i),m&&u(n,m),t}(r.a.Component)}}]);